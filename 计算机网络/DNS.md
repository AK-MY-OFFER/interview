# DNS

## 问题

* DNS是什么？
* DNS 用 UDP 还是 TCP 协议？
* DNS 的解析过程？
* DNS 的查询方式有哪些？
* DNS 负载均衡策略？
* DNS 常见记录类型？
* DNS 污染？DNS 劫持？
* 谈谈 CDN？
* 如何使 DNS 指向 CDN 地址？
* 域名和 IP 的关系，一个 IP 可以对应多个域名吗

## 回答

### DNS 是什么？

域名系统

* **域名和IP地址相互映射**的一个**分布式数据库**（域名比 IP地址方便记忆）
* 还可以用来实现负载均衡
* 是**主要**基于 UDP 的应用层协议



### DNS 用 UDP 还是 TCP 协议？？

DNS 并非只使用 UDP 协议，**它同时占用了 UDP 和 TCP 的 53 端口**

#### 为什么同时要用 TCP 和 UDP？

 **TCP 是面向字节流的，而 UDP 是面向报文的**

解释一下这句话，我们知道，TCP 具有序列号机制，发送方会把一个大的 HTTP 报文按序号分割成若干报文段并加上 TCP 首部，也就是封装成 TCP 报文段。那么接收方在收到这些 TCP 报文段后，就会按照序号以原来的顺序重组 HTTP 报文。这就是面向字节流的 TCP。

而所谓 UDP 面向报文，发送方的 UDP 对应用层交付下来的 HTTP 报文， 在添加 UDP 首部后也就是封装成 UDP 报文，就向下交付给网络层 IP 协议。**不做任何的拆分与合并**，主要就是因为 UDP 没有像 TCP 一样的序列号机制来标识报文，所以默认只有一个 UDP 报文。

UDP 这么做就会导致一个问题。

互联网上物理链路的最大传输单元 = 576 字节，为了在物理链路上顺利传输，UDP 报文不能超过 576 字节，为此，**UDP 报文被限制在 512 字节以内**。

而 DNS 由于大面积使用了 UDP，这样一旦 DNS 报文超过 512 字节，基于 UDP 的 DNS 报文就只有抛弃多出来的 64 字节，截短为 512 字节，那么用户得到的 DNS 报文就是不完整的。

如何解决这个问题呢？

没错，最简单的方式就是使用 TCP。尽管速度可能相之 UDP 较慢，但对于得到完整的 DNS 报文，速度慢一点也可以忍受。

#### **DNS 分别在什么情况下使用 UDP 和 TCP**

了解了 TCP 面向字节流而 UDP 面向报文的这个特性之后，在**域名解析**的时候，也就是客户端向 DNS [服务器](https://cloud.tencent.com/product/cvm?from=10680)查询域名获取 IP 地址的时候，DNS 协议关于 UDP 和 TCP 的选择通常可以分为以下两种情况：

1）若客户端**事先知道** DNS 响应报文的长度会大于 512 字节，则应当直接使用 TCP 建立连接

2）若客户端**事先不知道** DNS 响应报文的长度，一般会先使用 UDP 协议发送 DNS 查询报文，若 DNS 服务器发现 DNS 响应报文的长度大于 512 字节，则多出来的部分会被 UDP 抛弃（截断 TrunCation），那么服务器会把这个部分被抛弃的 DNS 报文首部中的 TC 标志位置为 1，以通知客户端该 DNS 报文已经被截断。客户端收到之后会重新发起一次 TCP 请求，从而使得它将来能够从 DNS 服务器收到完整的响应报文。

当然了，在域名解析的时候，一般返回的 DNS 响应报文都不会超过 512 字节，用 UDP 传输即可。事实上，很多 DNS 服务器进行配置的时候，也仅支持 UDP 查询包。

不过，DNS 不仅存在域名解析的过程，还有**区域传输**的过程，而在进行区域传输的时候 DNS 会强制使用 TCP 协议。



什么是区域传输？

这就不得不提一下**主域名服务器和辅助域名服务器**。

设置域名服务器时，服务器管理员可以选择将域名服务器指定为主服务器还是辅助服务器（也称为从服务器）。

主域名服务器负责维护一个区域的所有域名信息，是特定的所有信息的权威信息源，数据可以修改。主服务器直接从本地文件获取此信息。只能在主服务器上更改区域的 DNS 记录，然后主服务器才能更新辅助服务器。

当主域名服务器出现故障、关闭或负载过重时，辅助域名服务器作为主域名服务器的备份提供域名解析服务。辅助域名服务器中的区域文件中的数据是从主域名服务器中复制过来的，无法自行修改。

其实就是主从的概念，各位应该也都比较熟悉了。主域名服务器用来写，辅助域名服务器用来读，**提供**[**负载均衡**](https://cloud.tencent.com/product/clb?from=10680)**的能力，缓解主域名服务器的压力**。

那么所谓区域传输（zone transfer）呢，就是辅助域名服务器与主域名服务器通信，并同步数据信息的过程。

辅域名服务器会定时向主域名服务器进行查询以便了解数据是否有变动。如有变动，则会执行一次区域传输。区域传输使用 TCP 而不是 UDP，因为**数据同步传送的数据量比一个 DNS 请求和响应报文的数据量要多得多**。



文章开头提到的**既然 UDP 更快，为什么 HTTP 不使用 UDP 呢**？这个问题的答案也大抵如此。

**由于互联网的不安全性，我们需要数字证书并携带数字签名来保证数据的安全性，为此，整个 HTTP 报文的大小已经远远超过 512 字节，无法使用 UDP 传输。**



区域传送时使用TCP，主要有一下两点考虑： 

* 辅域名服务器会定时（一般时3小时）向主域名服务器进行查询以便了解数据是否有变动。如有变动，则会执行一次区域传送，进行数据同步。区域传送将使用TCP而不是UDP，因为数据同步传送的数据量比一个请求和应答的数据量要多得多。 

* TCP是一种可靠的连接，保证了数据的准确性。 

	

域名解析时使用UDP协议： 

* 客户端向DNS服务器查询域名，一般返回的内容都不超过512字节，用UDP传输即可。不
* 用经过TCP三次握手，这样DNS服务器负载更低，响应更快。虽然从理论上说，客户端也可以指定向DNS服务器查询的时候使用TCP，但事实上，很多DNS服务器进行配置的时候，仅支持UDP查询包。



### DNS 的解析过程？

我们在上网的时候，通常使用的方式是域名，而不是 IP 地址，因为域名方便人类记忆。

那么实现这一技术的就是 **DNS 域名解析**，DNS 可以将域名网址自动转换为具体的 IP 地址。

> 域名的层级关系

DNS 中的域名都是用**句点**来分隔的，比如 `www.server.com`，这里的句点代表了不同层次之间的**界限**。

在域名中，**越靠右**的位置表示其层级**越高**。

![DNS 树状结构](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/IP/32.jpg)

毕竟域名是外国人发明，所以思维和中国人相反，比如说一个城市地点的时候，外国喜欢从小到大的方式顺序说起（如 XX 街道 XX 区 XX 市 XX 省），而中国则喜欢从大到小的顺序（如 XX 省 XX 市 XX 区 XX 街道）。

根域是在最顶层，它的下一层就是 com 顶级域，再下面是 server.com。

所以域名的层级关系类似一个树状结构：

- 根 DNS 服务器
- 顶级域 DNS 服务器（com）
- 权威 DNS 服务器（server.com）

![DNS 树状结构](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/IP/32.jpg)

根域的 DNS 服务器信息保存在互联网中所有的 DNS 服务器中。这样一来，任何 DNS 服务器就都可以找到并访问根域 DNS 服务器了。

因此，客户端只要能够找到任意一台 DNS 服务器，就可以通过它找到根域 DNS 服务器，然后再一路顺藤摸瓜找到位于下层的某台目标 DNS 服务器。

> 域名解析的工作流程

**浏览器**首先看一下自己的缓存里有没有，如果没有就向**操作系统**的缓存要，还没有就检查**本机域名解析文件** `hosts`，如果还是没有，就会 **DNS 服务器**进行查询，查询的过程如下：

1. 客户端首先会发出一个 DNS 请求，问 www.server.com 的 IP 是啥，并发给本地 DNS 服务器（也就是客户端的 TCP/IP 设置中填写的 DNS 服务器地址）。
2. 本地域名服务器收到客户端的请求后，如果缓存里的表格能找到 www.server.com，则它直接返回 IP 地址。如果没有，本地 DNS 会去问它的根域名服务器：“老大， 能告诉我 www.server.com 的 IP 地址吗？” 根域名服务器是最高层次的，它不直接用于域名解析，但能指明一条道路。
3. 根 DNS 收到来自本地 DNS 的请求后，发现后置是 .com，说：“www.server.com 这个域名归 .com 区域管理”，我给你 .com 顶级域名服务器地址给你，你去问问它吧。”
4. 本地 DNS 收到顶级域名服务器的地址后，发起请求问“老二， 你能告诉我 www.server.com 的 IP 地址吗？”
5. 顶级域名服务器说：“我给你负责 www.server.com 区域的权威 DNS 服务器的地址，你去问它应该能问到”。
6. 本地 DNS 于是转向问权威 DNS 服务器：“老三，www.server.com对应的IP是啥呀？” server.com 的权威 DNS 服务器，它是域名解析结果的原出处。为啥叫权威呢？就是我的域名我做主。
7. 权威 DNS 服务器查询后将对应的 IP 地址 X.X.X.X 告诉本地 DNS。
8. 本地 DNS 再将 IP 地址返回客户端，客户端和目标建立连接。

至此，我们完成了 DNS 的解析过程。现在总结一下，整个过程我画成了一个图。

![域名解析的工作流程](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/IP/33.jpg)

### DNS 的查询方式有哪些？

 **一、主机向本地域名服务器的查询一般都是采用递归查询。**

​    所谓递归查询就是：如果主机所询问的本地域名服务器不知道被查询的域名的IP地址，那么本地域名服务器就以DNS客户的身份，

​    向其它根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。

​    因此，递归查询返回的查询结果或者是所要查询的IP地址，或者是报错，表示无法查询到所需的IP地址。

 

**二、本地域名服务器向根域名服务器的查询的迭代查询。**

   迭代查询的特点：当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地服务器：“你下一步应当向哪一个域名服务器进行查询”。

​    然后让本地服务器进行后续的查询。根域名服务器通常是把自己知道的顶级域名服务器的IP地址告诉本地域名服务器，让本地域名服务器再向顶级域名服务器查询。

​    顶级域名服务器在收到本地域名服务器的查询请求后，要么给出所要查询的IP地址，要么告诉本地服务器下一步应当向哪一个权限域名服务器进行查询。

​    最后，知道了所要解析的IP地址或报错，然后把这个结果返回给发起查询的主机 

### DNS 负载均衡策略？

当一个网站有足够多的用户的时候，假如每次请求的资源都位于同一台机器上面，那么这台机器随时可能会崩掉。处理办法就是用DNS负载均衡技术，它的原理是在**DNS服务器中为同一个主机名配置多个IP地址,在应答DNS查询时,DNS服务器对每个查询将以DNS文件中主机记录的IP地址按顺序返回不同的解析结果,将客户端的访问引导到不同的机器上去,使得不同的客户端访问不同的服务器**,从而达到负载均衡的目的｡例如可以根据每台机器的负载量，该机器离用户地理位置的距离等等。



### DNS 常见记录类型？

**一、什么是DNS记录？**
域名和IP之间的对应关系，称为“记录”（record）。根据记录使用的目的不同，又分为不同的类型

**二、DNS记录的常见类型**

**A记录**
A记录也称为主机记录，A记录的基本作用就是一个主机域名对应的ip地址是多少，即是域名和ip地址的对应关系。

```
www.baidu.com. IN A 1.1.1.2
mx1.baidu.com. IN A 1.1.1.3
mx2.baidu.com. IN A 1.1.1.3
```



**NS记录**
NS记录称为域名服务器记录，用来指定该域名由哪个DNS服务器来进行解析。假设baidu.com区域有两个DNS服务器负责解析，ns1.baidu.com是主服务器，ns2.baidu.com是辅助服务器，ns1.baidu.com的ip是202.99.16.1，ns2.baidu.com的ip是202.99.16.2。那么我们应该创建两条NS记录，当然，NS记录依赖A记录的解析，我们首先应该为ns1.baidu.com和ns2.baidu.com创建两条A记录
注：ns记录说明，在这个区域里，有多少个服务器承担解析的任务

```
baidu.com. IN NS ns1.baidu.com. 
baidu.com. IN NS ns2.baidu.com.
```



**SOA记录**
起始授权记录，用于一个区域的开始，SOA记录后的所有信息均是用于控制这个区域的，每个区域数据库文件都必须包含一个SOA记录，并且必须是其中的第一个资源记录，用以标识DNS服务器管理的起始位置，SOA说明能解析这个区域的dns服务器中哪个是主服务器
例如，NS记录说明了有两个DNS服务器负责baidu.com的域名解析，但哪个是主服务器呢？这个任务由SOA记录来完成



**CNAME记录**
又称为别名记录，其实就是让一个服务器有多个域名，大致相当于给一个人起个外号。

* 为什么需要Cname记录呢？一方面是照顾用户的使用习惯，例如我们习惯把邮件服务器命名为mail，把ftp服务器命名为ftp；
* 那如果只有一台服务器，同时提供邮件服务和FTP服务，那我们究竟该么命名呢？
	我们可以把服务器命名为mail.baidu.com，然后再创建一个Cname记录叫ftp.baidu.com就可以两者兼顾了。
* 另外使用Cname记录也有安全方面的考虑因素？
	例如我们不希望别人知道某个网站的真实域名，那我们可以让用户访问网站的别名，例如我们访问的百度网站的真实域名就是www.a.shifen.com，我们使用的www.baidu.com只是www.a.shifen.com的别名而已

```
web.sangfor.com. IN CNAME www.sangfor.com
```



**MX记录**
又称为邮件交换记录，MX记录用于说明哪台服务器是当前区域的邮件服务器，例如在baidu.com区域中，mail.baidu.com是邮件服务器，而且IP地址是202.99.16.125。那么我们就可以在DNS服务器中进行下列处理：1、为邮件服务器创建A记录，我们首先为邮件服务器创建一条A记录，这是因为MX记录中描述邮件服务器时不能使用IP地址，只能使用完全合格域名



```
magedu.com. IN MX 10 mx1.magedu.com. 
IN MX 20 mx2.magedu.com
```



**PRT记录**
又称为逆向查询记录，用于从ip地址中查询域名。PTR记录是A记录的逆向记录，作用是把IP地址解析为域名

```
4.3.2.1.in-addr.arpa. IN PTR www.sangfor.com
```



**三、一句话介绍资源记录类型**

![在这里插入图片描述](https://img-blog.csdnimg.cn/291c6563782842ffaa598711d19f9b07.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6KaB5Yqq5Yqb44CC44CC,size_20,color_FFFFFF,t_70,g_se,x_16)



### DNS 污染？DNS 劫持？

**一、什么是DNS劫持**

DNS劫持就是通过**劫持了DNS服务器，通过某些手段取得域名的解析记录控制权，进而修改域名的解析结果**，导致对该域名的访问由原IP地址转入到修改后的指定IP，其结果就是对特定的网址不能访问或访问的是假网址，从而实现窃取资料或者破坏原有正常服务的目的。[DNS劫持通过篡改DNS服务器上的数据](https://www.dns.com/speed.html)返回给用户一个错误的查询结果来实现的。

再说简单点，当你输入google.com这个网址的时候，你看到的网站却是百度的首页。

**二、什么是DNS污染？**

DNS污染是指一些刻意制造或无意中制造出来的域名服务器分组，把域名指往不正确的IP地址。它是一种让一般用户由于得到虚假目标主机IP而不能与其通信的方法，是一种DNS缓存投毒攻击.DNS污染是发生在用户请求的第一步上，直接从协议上对用户的DNS请求进行干扰。简单来说,DNS污染就是指运营商对于你的DNS域名解析请求会进行修改，以插入广告，或者让你无法访问某些网站，网速也会变慢。



**验证方法**

```
nslookup 对应的域名 一个不存在的域名服务器地址
nslookup http://780822.com 144.223.234.234
```

即可判断该域名是否被污染，由于144.223.234.234不存在，理应没有任何返回。但我们却得到了一个错误的IP(不确定)。即可证明这个域名已经被DNS污染了



**三、有效的解决方法？**

1、对[于 DNS劫持](https://www.dns.com/speed.html)，可以通过手动更换 DNS 服务器为 **公共DNS** 解决。

2、对于[ DNS污染](https://www.dns.com/speed.html)，可以说，个人用户很难单单靠设置解决，通常可以使用 VPN 或者域名远程解析的方法解决(**具体原理还要专门查一下，这里不方便写**），但这大多需要购买付费的 VPN 或 SSH 等，也可以通过修改 Hosts 的方法，手动设置域名正确的 IP 地址，**以上只能解决自己访问的问题，对企业来说能让用户访问才行。**

3、**使用第3方[DNS解析](https://www.dns.com/high_defense_dns.html)服务**。目前很多第3方网站都提供有[DNS解析服务](https://www.dns.com/service.html)，而且不少还是免费的，国内也都有免费的DNS解析服务，这样就能使用第3方DNS服务可以有效解决问题



### 谈谈 CDN？

https://zhuanlan.zhihu.com/p/28940451

Content Delivery Network或Content Ddistribute Network，即内容分发网络

**基本思路**：

尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。



**目的**：

解决因分布、带宽、服务器性能带来的访问延迟问题，适用于站点加速、点播、直播等场景。使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度和成功率。

控制时延无疑是现代信息科技的重要指标，CDN的意图就是尽可能的减少资源在转发、传输、链路抖动等情况下顺利保障信息的连贯性。



**作用：**

* 网站加速

- 为了实现跨运营商、跨地域的全网覆盖

互联不互通、区域ISP地域局限、出口带宽受限制等种种因素都造成了网站的区域性无法访问。CDN加速可以覆盖全球的线路，通过和运营商合作，部署IDC资源，在全国骨干节点商，合理部署CDN边缘分发存储节点，充分利用带宽资源，平衡源站流量。

- 为了保障你的网站安全

CDN的负载均衡和分布式存储技术，可以加强网站的可靠性，相当无无形中给你的网站添加了一把保护伞，应对绝大部分的互联网攻击事件。防攻击系统也能避免网站遭到恶意攻击。

- 为了异地备援

当某个服务器发生意外故障时，系统将会调用其他临近的健康服务器节点进行服务，进而提供接近100%的可靠性，这就让你的网站可以做到永不宕机。

- 为了节约成本投入

使用CDN加速可以实现网站的全国铺设，你根据不用考虑购买服务器与后续的托管运维，服务器之间镜像同步，也不用为了管理维护技术人员而烦恼，节省了人力、精力和财力。

- 为了让你更专注业务本身

CDN加速厂商一般都会提供一站式服务，业务不仅限于CDN，还有配套的云存储、大数据服务、视频云服务等，而且一般会提供7x24运维监控支持，保证网络随时畅通，你可以放心使用。并且将更多的精力投入到发展自身的核心业务之上。



**基础架构：**最简单的CDN网络由一个DNS服务器和几台缓存服务器组成：

1. 当用户点击网站页面上的内容URL，经过本地DNS系统解析，DNS系统会最终将域名的解析权交给CNAME指向的CDN专用DNS服务器。
2. CDN的DNS服务器将CDN的全局负载均衡设备IP地址返回用户。
3. 用户向CDN的全局负载均衡设备发起内容URL访问请求。
4. CDN全局负载均衡设备根据用户IP地址，以及用户请求的内容URL，选择一台用户所属区域的区域负载均衡设备，告诉用户向这台设备发起请求。
5. 区域负载均衡设备会为用户选择一台合适的缓存服务器提供服务，选择的依据包括：根据用户IP地址，判断哪一台服务器距用户最近；根据用户所请求的URL中携带的内容名称，判断哪一台服务器上有用户所需内容；查询各个服务器当前的负载情况，判断哪一台服务器尚有服务能力。基于以上这些条件的综合分析之后，区域负载均衡设备会向全局负载均衡设备返回一台缓存服务器的IP地址。
6. 全局负载均衡设备把服务器的IP地址返回给用户。
7. 用户向缓存服务器发起请求，缓存服务器响应用户请求，将用户所需内容传送到用户终端。如果这台缓存服务器上并没有用户想要的内容，而区域均衡设备依然将它分配给了用户，那么这台服务器就要向它的上一级缓存服务器请求内容，直至追溯到网站的源服务器将内容拉到本地。





**1.CDN加速是对网站所在服务器加速，还是对其域名加速？**

*CDN是只对网站的某一个具体的域名加速。如果同一个网站有多个域名，则访客访问加入CDN的域名获得加速效果，访问未加入CDN的域名，或者直接访问IP地址，则无法获得CDN效果。*

**2.CDN和镜像站点比较有何优势？**　　

*CDN对网站的访客完全透明，不需要访客手动选择要访问的镜像站点，保证了网站对访客的友好性。　　
CDN对每个节点都有可用性检查，不合格的节点会第一时间剔出，从而保证了极高的可用率，而镜像站点无法实现这一点。　　
CDN部署简单，对原站基本不做任何改动即可生效。*

**3.CDN和双线机房相比有何优势？**

*常见的双线机房只能解决网通和电信互相访问慢的问题，其它ISP（譬如教育网，移动网，铁通）互通的问题还是没得到解决。　　
而CDN是访问者就近取数据，而CDN的节点遍布各ISP，从而保证了网站到任意ISP的访问速度。另外CDN因为其流量分流到各节点的原理，天然获得抵抗网络攻击的能力。*

**4.CDN使用后，原来的网站是否需要做修改，做什么修改？**

*一般而言，网站无需任何修改即可使用CDN获得加速效果。只是对需要判断访客IP程序，才需要做少量修改。*

**5.为什么我的网站更新后，通过CDN后看到网页还是旧网页，如何解决？**　　

*由于CDN采用各节点缓存的机制，网站的静态网页和图片修改后，如果CDN缓存没有做相应更新，则看到的还是旧的网页。
为了解决这个问题，CDN管理面板中提供了URL推送服务，来通知CDN各节点刷新自己的缓存。　　
在URL推送地址栏中，输入具体的网址或者图片地址，则各节点中的缓存内容即被统一删除，并且当即生效。　　
如果需要推送的网址和图片太多，可以选择目录推送，输入 [http://www.kkk.com/news](https://link.zhihu.com/?target=http%3A//www.kkk.com/news) 即可以对网站下news目录下所有网页和图片进行了刷新。*

**6.能不能让CDN不缓存某些即时性要求很高的网页和图片？**

*只需要使用动态页面，asp，php，jsp等动态技术做成的页面不被CDN缓存，无需每次都要刷新。或者采用一个网站两个域名，一个启用CDN，另外一个域名不用CDN，对即时性要求高的页面和图片放在不用CDN的域名下。*

**7.网站新增了不少网页和图片，这些需要使用URL推送吗？**　　

*后来增加的网页和图片，不需要使用URL推送，因为它们本来就不存在缓存中。*

**8.网站用CDN后，有些地区反映无法访问了，怎么办？**

*CDN启用后，访客不能访问网站有很多种可能，可能是CDN的问题，也可能是源站点出现故障或者源站点被关闭，还可能是访客自己所在的网络出现问题，甚至我们实际故障排除中，还出现过客户自己计算机中毒，导致无法访问网站。　　
客户报告故障时，可随时联系我们24小时技术部进行处理。*

**9.哪些情况不适用于CDN?**

![img](https://pic1.zhimg.com/v2-3cb264b4b37a79bdcd27afcbdf34b0e8_b.jpg)

**备注：此类极端状况不建议您使用CDN服务**





### 域名和 IP 的关系，一个 IP 可以对应多个域名吗

IP 在同一个网络中是唯一的，用来标识每一个网络上的设备，其相当于一个人的身份证号；域名在同一个网络中也是唯一的，就像一个人的名字，绰号。假如你有多个不同的绰号，你的朋友可以用其中任何一个绰号叫你，但你的身份证号码却是唯一的。由此我们可以看出一个域名只能对应一个 IP 地址，是一对一的关系；而一个 IP 却可以对应多个域名，是一对多的关系。

